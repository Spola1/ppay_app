%tr.item-card-tr
  %td.item-card-td.item-card-td-label События по платежу
  %td.item-card-td.max-w-0.overflow-hidden.text-xs

    - payment.audits.find_each do |audit|
      - if audit.user.present?
        %b= audit.user.decorate.audit_user_info
        %br
      - audit.audited_changes.each do |attrs, value|
        = "#{I18n.t("payments.attributes.#{attrs}")}:"
        - if value.is_a?(Array)
          - if value.compact.size == 2 && attrs != 'status_changed_at'
            = "#{value[0]} -> #{value[1]}" 
            %br
          - elsif value.compact.size == 2 && attrs == 'status_changed_at'
            = "#{payment.formatted_date_str(value[0])} -> #{payment.formatted_date_str(value[1])}"
            %br
          - elsif value.compact.size == 1 && attrs == 'status_changed_at'
            = payment.formatted_date_str(value[1])
            %br
          - else
            = value[1]
            %br
        - else
          = value
          %br
